---
title: "告警策略（工作负载级别）"
keywords: 'KubeSphere, Kubernetes, 工作负载, 告警, 策略, 通知'
description: '了解如何为工作负载设置告警策略。'
linkTitle: "告警策略（工作负载级别）"
weight: 10710
---

KubeSphere 支持针对节点和工作负载的告警策略。本教程演示如何为项目中的工作负载创建告警策略。有关如何为节点配置告警策略，请参见[告警策略（节点级别）](../../../cluster-administration/cluster-wide-alerting-and-notification/alerting-policy/)。

## 准备工作

- 您需要启用 [KubeSphere 告警系统](../../../pluggable-components/alerting/)。
- 若想接收告警通知，您需要预先配置一个[通知渠道](../../../cluster-administration/platform-settings/notification-management/configure-email/)。
- 您需要创建一个企业空间、一个项目和一个用户（例如 `project-regular`）。该用户必须已邀请至该项目，并具有 `operator` 角色。有关更多信息，请参见[创建企业空间、项目、用户和角色](../../../quick-start/create-workspace-and-project/)。
- 您需要确保项目中存在工作负载。如果项目中没有工作负载，请参见[部署并访问 Bookinfo](../../../quick-start/deploy-bookinfo-to-k8s/) 来创建示例应用。

## 创建告警策略

1. 以 `project-regular` 身份登录控制台并访问您的项目。导航到**监控告警**下的**告警策略**，点击**创建**。

2. 在弹出的对话框中，提供如下基本信息。点击**下一步**继续。

   - **名称**：使用简明名称作为其唯一标识符，例如 `alert-demo`。
   - **别名**：帮助您更好地识别告警策略。
   - **描述信息**：对该告警策略的简要介绍。
   - **阈值时间（分钟）**：告警规则中设置的情形持续时间达到该阈值后，告警策略将变为触发中状态。
   - **告警级别**：提供的值包括**一般告警**、**重要告警**和**危险告警**，代表告警的严重程度。

3. 在**规则设置**选项卡，您可以使用规则模板或创建自定义规则。若想使用模板，请填写以下字段。

   - **资源类型**：选择想要监控的资源类型，例如**部署**、**有状态副本集**或**守护进程集**。
   - **监控目标**：取决于您所选择的资源类型，目标可能有所不同。如果项目中没有工作负载，则无法看到任何监控目标。
   - **告警规则**：为告警策略定义规则。这些规则基于 Prometheus 表达式，满足条件时将会触发告警。您可以对 CPU、内存等对象进行监控。

   {{< notice note >}}

   您可以在**监控指标**字段输入表达式（支持自动补全），以使用 PromQL 创建自定义规则。有关更多信息，请参见 [Querying Prometheus](https://prometheus.io/docs/prometheus/latest/querying/basics/)。

   {{</ notice >}} 

   点击**下一步**继续。

4. 在**消息设置**选项卡，输入想要在包含在通知中的告警标题和消息，然后点击**创建**。

5. 告警策略刚创建后将显示为**未触发**状态；一旦满足规则表达式中的条件，则会首先达到**待触发**状态；满足告警条件的时间达到阈值时间后，将变为**触发中**状态。

## 编辑告警策略

若要在创建后编辑告警策略，点击**告警策略**页面右侧的 <img src="/images/docs/v3.3/zh-cn/project-user-guide/alerting/alerting-policies/edit-alerting-policy.png" height="20px">。

1. 点击下拉菜单中的**编辑**，按照创建时相同的步骤来编辑告警策略。点击**消息设置**页面的**确定**保存更改。

2. 点击下拉菜单中的**删除**来删除告警策略。

## 查看告警策略

在**告警策略**页面，点击任一告警策略来查看其详情，包括告警规则和告警历史。您还可以看到创建告警策略时基于所使用模板的告警规则表达式。

在**告警监控**下，**告警监控**图显示一段时间内的实际资源使用情况或使用量。**告警消息**显示您在通知中设置的自定义消息。
