---
title: "存储卷快照"
keywords: 'KubeSphere, Kubernetes, 存储卷, 快照'
description: '了解如何在 KubeSphere 中管理持久卷的快照。'
linkTitle: "存储卷快照"
weight: 10320
---

许多存储系统都支持为持久卷创建快照。快照是存储卷的一个即时副本，可用于供应新存储卷（预先在其中填充快照数据）或将现有存储卷恢复到创建快照时的状态。有关更多信息，请参阅 [Kubernetes 官方文档](https://kubernetes.io/zh/docs/concepts/storage/volume-snapshots/)。

本教程演示如何创建和使用存储卷快照。

## 准备工作

- 您需要创建一个企业空间、一个项目和一个用户（例如 `project-regular`）。该用户必须已邀请至该项目，并具有 `operator` 角色。有关更多信息，请参阅[创建企业空间、项目、用户和角色](../../../quick-start/create-workspace-and-project/)。

- 您需要确保 Kubernetes 版本为 1.17 或更新版本。

- 您需要确保底层存储插件支持快照。
- 您需要准备一个可用的存储卷以便为其创建快照。有关更多信息，请参阅[存储卷](../volumes/)。

## 创建存储卷快照

1. 以 `project-regular` 用户登录 KubeSphere Web 控制台并进入项目。在左侧导航栏选择**存储管理**下的**存储卷**，在页面右侧选择需要创建快照的存储卷。

2. 在存储卷详情页面，点击**更多操作**并从下拉菜单中选择**创建快照**。

3. 在出现的对话框中，设置快照的名称，然后点击**确定**完成创建。快照的名称将作为快照的唯一标识符。

4. 新建的快照显示在**存储卷快照**列表中。


## 用快照创建存储卷

您可以通过两种方式用快照创建存储卷。

### 在快照详情页面创建存储卷

1. 以 `project-regular` 用户登录 KubeSphere Web 控制台，进入快照详情页面，然后点击**应用**来使用快照。其他步骤与直接创建存储卷基本相同。

   ![apply-volume](/images/docs/zh-cn/project-user-guide/volume-management/volume-snapshots/apply-volume.jpg)

2. 在弹出的对话框中设置存储卷的名称，然后点击**下一步**。

   {{< notice note >}}

   您将创建一个 PersistentVolumeClaim (PVC) 资源。

   {{</ notice >}} 

3. 在**存储卷设置**选项卡中，选择访问模式，然后点击**下一步**。

4. 在**高级设置**选项卡中，为存储卷添加元数据（例如 **Label** 和 **Annotation**），然后点击**创建**完成操作。

5. 新建的存储卷显示在**存储卷**页面。

### 在存储卷页面创建存储卷

1. 以 `project-regular` 用户登录 KubeSphere Web 控制台并进入项目。在左侧导航栏选择**存储管理**下的**存储卷**，然后点击**创建**。

2. 在弹出的对话框中设置存储卷的名称，然后点击**下一步**。

3. 在**存储卷设置**选项卡中，将**方式**设置为**通过存储卷快照创建**，选择一个存储卷快照和访问模式，然后点击**下一步**。

4. 在**高级设置**选项卡中，为存储卷添加元数据（例如 **Label** 和 **Annotation**），然后点击**创建**完成操作。

5. 新建的存储卷显示在**存储卷**页面。