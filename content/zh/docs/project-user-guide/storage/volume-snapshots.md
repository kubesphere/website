---
title: "卷快照"
keywords: 'KubeSphere, Kubernetes, 持久卷声明, 快照'
description: '了解如何在 KubeSphere 中管理持久卷声明的快照。'
linkTitle: "卷快照"
weight: 10330
---

许多存储系统都支持为持久卷创建快照。快照是持久卷声明的一个即时副本，可用于供应新持久卷声明（预先在其中填充快照数据）或将现有持久卷声明恢复到创建快照时的状态。有关更多信息，请参阅 [Kubernetes 官方文档](https://kubernetes.io/zh/docs/concepts/storage/volume-snapshots/)。

本教程演示如何创建和使用卷快照。

## 准备工作

- 您需要创建一个企业空间、一个项目和一个用户（例如 `project-regular`）。该用户必须已邀请至该项目，并具有 `operator` 角色。有关更多信息，请参阅[创建企业空间、项目、用户和角色](../../../quick-start/create-workspace-and-project/)。

- 您需要确保 Kubernetes 版本为 1.17 或更新版本。

- 您需要确保底层存储插件支持快照。

- 您需要准备一个可用的持久卷声明以便为其创建快照。有关更多信息，请参阅[持久卷声明](../volumes/)。

- 您需要创建一个[卷快照类](../../../cluster-administration/snapshotclass/)。

## 创建持久卷声明快照

您可以通过两种方式创建卷快照。
### 方法 1：卷快照页面

1. 以 `project-regular` 用户登录 KubeSphere Web 控制台并进入项目。在左侧导航栏选择**存储**下的**卷快照**。

2. 在右侧的**卷快照**页面，点击**创建**。

3. 在弹出的**创建快照**对话框中，选择支持创建快照的持久卷声明，输入卷快照名称并选择卷快照类，点击**确定**完成创建。在**卷快照**列表查看新建的快照。

4. 点击**卷快照内容**查看卷快照状态、容量、卷快照类等信息。
### 方法 2：持久卷声明页面

1. 以 `project-regular` 用户登录 KubeSphere Web 控制台并进入项目。在左侧导航栏选择**存储**下的**持久卷声明**，在页面右侧选择需要创建快照的持久卷声明。

2. 在持久卷声明详情页面，点击 **更多操作 > 创建快照**。

3. 在弹出的对话框中，设置快照的名称并选择快照类型，然后点击**确定**完成创建。快照的名称将作为快照的唯一标识符。在**卷快照**列表查看新建的快照。


## 用快照创建持久卷声明

您可以通过两种方式用快照创建持久卷声明。
### 方法1：快照详情页面

1. 以 `project-regular` 用户登录 KubeSphere Web 控制台，进入快照详情页面，然后点击**创建卷**来使用快照。其他步骤与直接创建持久卷声明基本相同。

2. 在弹出的对话框中设置持久卷声明的名称，然后点击**下一步**。

   {{< notice note >}}

   您将创建一个 PersistentVolumeClaim (PVC) 资源。

   {{</ notice >}} 

3. 在**存储设置**页签，选择访问模式，然后点击**下一步**。

4. 在**高级设置**页签，为持久卷声明添加元数据，点击**创建**。

### 方法2：持久卷声明页面

1. 以 `project-regular` 用户登录 KubeSphere Web 控制台并进入项目。在左侧导航栏选择**存储**下的**持久卷声明**，然后点击**创建**。

2. 在弹出的对话框中设置持久卷声明的名称，然后点击**下一步**。

3. 在**存储设置**选项卡中，将**创建方式**设置为**通过卷快照创建**，选择一个卷快照和访问模式，然后点击**下一步**。

4. 在**高级设置**选项卡中，为持久卷添加元数据，然后点击**创建**。