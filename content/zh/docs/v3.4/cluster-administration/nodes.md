---
title: "节点管理"
keywords: "Kubernetes, KubeSphere, 污点, 节点, 标签, 请求, 限制"
description: "监控节点状态并了解如何添加节点标签和污点。"

linkTitle: "节点管理"
weight: 8100
---

Kubernetes 将容器放入容器组（Pod）中并在节点上运行，从而运行工作负载。取决于具体的集群环境，节点可以是虚拟机，也可以是物理机。每个节点都包含运行容器组所需的服务，这些服务由控制平面管理。有关节点的更多信息，请参阅[ Kubernetes 官方文档](https://kubernetes.io/zh/docs/concepts/architecture/nodes/)。

本教程介绍集群管理员可查看的集群节点信息和可执行的操作。

## 准备工作

您需要一个被授予**集群管理**权限的用户。例如，您可以直接用 `admin` 用户登录控制台，或创建一个具有**集群管理**权限的角色然后将此角色授予一个用户。

## 节点状态

只有集群管理员可以访问集群节点。由于一些节点指标对集群非常重要，集群管理员应监控这些指标并确保节点可用。请按照以下步骤查看节点状态。

1. 点击左上角的**平台管理**，然后选择**集群管理**。

2. 如果您已启用了[多集群功能](../../multicluster-management/)并已导入了成员集群，您可以选择一个特定集群以查看其节点信息。如果尚未启用该功能，请直接进行下一步。

3. 在左侧导航栏中选择**节点**下的**集群节点**，查看节点的状态详情。

   - **名称**：节点的名称和子网 IP 地址。
   - **状态**：节点的当前状态，标识节点是否可用。
   - **角色**：节点的角色，标识节点是工作节点还是主节点。
   - **CPU 用量**：节点的实时 CPU 用量。
   - **内存用量**：节点的实时内存用量。
   - **容器组**：节点的实时容器组用量。
   - **已分配 CPU**：该指标根据节点上容器组的总 CPU 请求数计算得出。它表示节点上为工作负载预留的 CPU 资源。工作负载实际正在使用 CPU 资源可能低于该数值。该指标对于 Kubernetes 调度器 (kube-scheduler) 非常重要。在大多数情况下，调度器在调度容器组时会偏向配得 CPU 资源较少的节点。有关更多信息，请参阅[为容器管理资源](https://kubernetes.io/zh/docs/concepts/configuration/manage-resources-containers/)。
   - **已分配内存**：该指标根据节点上容器组的总内存请求计算得出。它表示节点上为工作负载预留的内存资源。工作负载实际正在使用内存资源可能低于该数值。

    {{< notice note >}}
   在大多数情况下，**CPU** 和**已分配 CPU** 的数值不同，**内存**和**已分配内存**的数值也不同，这是正常现象。集群管理员需要同时关注一对指标。最佳实践是根据节点的实际使用情况为每个节点设置资源请求和限制。资源分配不足可能导致集群资源利用率过低，而过度分配资源可能导致集群压力过大从而处于不健康状态。
    {{</ notice >}}

## 节点管理

在**集群节点**页面，您可以执行以下操作：

- **停止调度/启用调度**：点击集群节点右侧的 <img src="/images/docs/v3.x/common-icons/three-dots.png" width="15" />，然后点击**停止调度**或**启用调度**停止或启用调度节点。您可以在节点重启或维护期间将节点标记为不可调度。Kubernetes 调度器不会将新容器组调度到标记为不可调度的节点。但这不会影响节点上现有工作负载。

- **打开终端**：点击集群节点右侧的 <img src="/images/docs/v3.x/common-icons/three-dots.png" width="15" />,然后点击**打开终端**。该功能让您更加便捷地管理节点，如修改节点配置、下载镜像等。

- **编辑污点**：污点允许节点排斥一些容器组。勾选目标节点前的复选框，在上方弹出的按钮中点击**编辑污点**。在弹出的**编辑污点**对话框，您可以添加或删除污点。

同时，您也可以点击列表中的某个节点打开节点详情页面。除了**停止调度/启用调度**和**编辑污点**外，您还可以执行以下操作：

- **编辑标签**：您可以利用节点标签将容器组分配给特定节点。首先标记节点（例如，用 `node-role.kubernetes.io/gpu-node` 标记 GPU 节点），然后在[创建工作负载](../../project-user-guide/application-workloads/deployments/#步骤-5配置高级设置)时在**高级设置**中添加此标签，从而使容器组在 GPU 节点上运行。要添加节点标签，请点击**更多操作** > **编辑标签**。

- 查看节点运行状态、容器组、元数据、监控和事件。

    {{< notice note >}}
请谨慎添加污点，因为它们可能会导致意外行为从而导致服务不可用。有关更多信息，请参阅[污点和容忍度](https://kubernetes.io/zh/docs/concepts/scheduling-eviction/taint-and-toleration/)。
    {{</ notice >}}

## 添加和删除节点

当前版本不支持通过 KubeSphere 控制台添加或删除节点。您可以使用 [KubeKey](https://github.com/kubesphere/kubekey) 来进行此类操作。有关更多信息，请参阅[添加新节点](../../installing-on-linux/cluster-operation/add-new-nodes/)和[删除节点](../../installing-on-linux/cluster-operation/remove-nodes/)。

