---
title: "Deploy KubeSphere on GKE"
keywords: 'Kubernetes, KubeSphere, GKE, Installation'
description: 'How to install KubeSphere on GKE'

weight: 2265
---

![KubeSphere+GKE](https://pek3b.qingstor.com/kubesphere-docs/png/20191123145223.png)

This guide walks you through the steps of deploying KubeSphere on [Google Kubernetes Engine](https://cloud.google.com/kubernetes-engine/).

## Prepare a GKE Cluster

- A standard Kubernetes cluster in GKE is a prerequisite of installing KubeSphere. Go to the navigation menu and refer to the image below to create a cluster.

![create-cluster-gke](https://ap3.qingstor.com/kubesphere-website/docs/create-cluster-gke.jpg)

- In **Cluster basics**, select a Master version. The static version `1.15.12-gke.2` is used here as an example.

![](https://ap3.qingstor.com/kubesphere-website/docs/master-version.png)

- In **default-pool** under **Node Pools**, define 3 nodes in this cluster.

![node-number](https://ap3.qingstor.com/kubesphere-website/docs/node-number.png)

- Go to **Nodes**, select the image type and set the Machine Configuration as below. When you finish, click **Create**.

![machine-config](https://ap3.qingstor.com/kubesphere-website/docs/machine-configuration.jpg)

{{< notice note >}} 

- Supported Kubernetes versions for KubeSphere 3.0.0: 1.15.x, 1.16.x, 1.17.x, 1.18.x.
- Ubuntu is used for the operating system here as an example. For more information on supported systems, see Overview.
- 3 nodes are included in this example. You can add more nodes based on your own needs especially in a production environment.
- The machine type e2-medium (2 vCPU, 4GB memory) is for minimal installation. If you want to enable pluggable components or use the cluster for production, please select a machine type with more resources.
- For other settings, you can change them as well based on your own needs or use the default value.

{{</ notice >}} 

- When the GKE cluster is ready, you can connect to the cluster with Cloud Shell.


![cloud-shell-gke](https://ap3.qingstor.com/kubesphere-website/docs/cloud-shell.png)

## Install KubeSphere on GKE

- Install KubeSphere using kubectl. The following command is only for the default minimal installation.

```bash
kubectl apply -f https://raw.githubusercontent.com/kubesphere/ks-installer/master/deploy/kubesphere-installer.yaml
```

- Create a local cluster-configuration.yaml.

```bash
vi cluster-configuration.yaml
```

- Copy all the content in this [file](https://raw.githubusercontent.com/kubesphere/ks-installer/master/deploy/cluster-configuration.yaml) and paste it to your local cluster-configuration.yaml. Navigate to `metrics_server`, and change `true` to `false` for `enabled`.

![change-metrics-server](https://ap3.qingstor.com/kubesphere-website/docs/true-false.png)

{{< notice warning >}}

Metrics Server is already installed on GKE. If you do not disable `metrics_server` in the cluster-configuration.yaml file, it will cause an issue and stop the installation process.

{{</ notice >}}

- Save the file when you finish. Execute the following command to start installation:

```bash
kubectl apply -f cluster-configuration.yaml
```

- Inspect the logs of installation:

```bash
kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath='{.items[0].metadata.name}') -f
```

- When the installation finishes, you can see the following message:

```bash
#####################################################
###              Welcome to KubeSphere!           ###
#####################################################
Console: http://10.128.0.44:30880
Account: admin
Password: P@88w0rd
NOTESï¼š
  1. After logging into the console, please check the
     monitoring status of service components in
     the "Cluster Management". If any service is not
     ready, please wait patiently until all components
     are ready.
  2. Please modify the default password after login.
#####################################################
https://kubesphere.io             2020-xx-xx xx:xx:xx
```

## Access KubeSphere Console

Now that KubeSphere is installed, you can access the web console of KubeSphere by following the step below.

- In **Services & Ingress**, select the service **ks-console**.

![ks-console](https://ap3.qingstor.com/kubesphere-website/docs/console-service.jpg)

- In **Service details**, click **Edit** and change the type from `NodePort` to `LoadBalancer`. Save the file when you finish.

![lb-change](https://ap3.qingstor.com/kubesphere-website/docs/lb-change.jpg)

- Access the web console of KubeSphere using the endpoint generated by GKE.


![access-console](https://ap3.qingstor.com/kubesphere-website/docs/access-console.png)

{{< notice tip >}}

Instead of changing the service type to `LoadBalancer`, you can also access KubeSphere console via `NodeIP:NodePort` (service type set to `NodePort`). You may need to open port `30880` in firewall rules.

{{</ notice >}}

- Log in the console with the default account and password (`admin/P@88w0rd`). In the cluster overview page, you can see the dashboard as shown in the following image.

![gke-cluster](https://ap3.qingstor.com/kubesphere-website/docs/gke-cluster.png)

## Enable Pluggable Components (Optional)

The example above demonstrates the process of a default minimal installation. To enable other components in KubeSphere, see [Enable Pluggable Components](https://kubesphere.io/docs/pluggable-components/) for more details.

